{"ast":null,"code":"// import React, { useState, useEffect } from 'react';\n// import axios from 'axios';\n// import { useNavigate } from 'react-router-dom';\n// import Modal from 'react-modal';\n// import Cfvbscf from './Cfvbscf';\n// import 'bootstrap/dist/css/bootstrap.min.css';\n\n// Modal.setAppElement('#root');\n\n// function Fvbscf() {\n//   const [fVente, setFVente] = useState([]);\n//   const [ssortieVente, setSSortieVente] = useState([]);\n//   const [selectedFacture, setSelectedFacture] = useState(null);\n//   const [selectedRowId, setSelectedRowId] = useState(null);\n//   const [modalIsOpen, setModalIsOpen] = useState(false);\n\n//   const navigate = useNavigate();\n\n//   useEffect(() => {\n//     axios.get('http://localhost:7777/fvbscf/')\n//       .then((res) => {\n//         const formattedFVente = res.data.map((facture) => {\n//           const date = new Date(facture.date);\n//           const formattedDate = date.toISOString().split('T')[0];\n//           return {\n//             ...facture,\n//             date: formattedDate,\n//           };\n//         });\n//         setFVente(formattedFVente);\n//       })\n//       .catch((err) => console.log(err));\n\n//     axios.get('http://localhost:7777/ssortieventecf')\n//       .then((res) => {\n//         setSSortieVente(res.data);\n//       })\n//       .catch((err) => console.log('Error fetching ssortievente data:', err));\n//   }, []);\n\n//   const handleDelete = async () => {\n//     const id = selectedFacture?.id;\n//     if (!id) {\n//       console.log(\"No selected facture id\");\n//       return;\n//     }\n//     try {\n//       console.log(`Deleting facture with id: ${id}`);\n//       await axios.delete(`http://localhost:7777/factureVentecf/${id}`);\n//       setFVente(fVente.filter((facture) => facture.id !== id));\n//       setSelectedFacture(null);\n//       setSelectedRowId(null);\n//     } catch (err) {\n//       console.log(\"Error during delete request:\", err);\n//     }\n//   };\n\n//   const handleSubmit = (newFactureData) => {\n//     axios.post('http://localhost:7777/cfvbs/', newFactureData)\n//       .then(res => {\n//         setModalIsOpen(false);\n//         setFVente([...fVente, res.data]);\n//       })\n//       .catch(err => console.log('Error creating facture:', err));\n//   };\n\n//   const handleRowClick = (id, facture) => {\n//     setSelectedFacture(facture);\n//     setSelectedRowId(id);\n//   };\n\n//   const handleCreateFactureClick = () => {\n//     navigate('/cfvbscfa', { state: { selectedFacture } });\n//   };\n\n//   return (\n//     <div className=\"facture-vente-container\">\n//       <Cfvbscf onFactureSubmit={handleSubmit} selectedFacture={selectedFacture} />\n//       <button onClick={() => setModalIsOpen(true)}>Voir les produits</button>\n//       <Modal\n//         isOpen={modalIsOpen}\n//         onRequestClose={() => setModalIsOpen(false)}\n//         contentLabel=\"Voir les factures de vente\"\n//         style={{\n//           content: {\n//             top: '50%',\n//             left: '50%',\n//             right: 'auto',\n//             bottom: 'auto',\n//             marginRight: '-50%',\n//             transform: 'translate(-50%, -50%)',\n//             width: '80%',\n//             maxWidth: '800px',\n//             maxHeight: '80vh',\n//             overflowY: 'auto',\n//           },\n//         }}\n//       >\n//         <div className=\"d-flex justify-content-between align-items-center mb-3\">\n//           <h2 className=\"mb-4\">Factures de vente :</h2>\n//         </div>\n//         <button onClick={handleDelete}>Supprimer</button>\n//         <div className=\"table-responsive\">\n//           <table className=\"table table-striped\">\n//             <thead>\n//               <tr>\n//                 <th>Reference</th>\n//                 <th>Prix</th>\n//                 <th>Quantité</th>\n//                 <th>Remise</th>\n//               </tr>\n//             </thead>\n//             <tbody>\n//               {ssortieVente.map((entry, entryIndex) => {\n//                 const articles = JSON.parse(entry.articles);\n//                 return articles.map((article, articleIndex) => {\n//                   const id = `${entryIndex}-${articleIndex}`;\n//                   const facture = {\n//                     id: entry.id,\n//                     articles,\n//                     clName: entry.clName,\n//                     client_id: entry.client_id\n//                   };\n//                   return (\n//                     <tr\n//                       key={id}\n//                       onClick={() => handleRowClick(id, facture)}\n//                       className={selectedRowId === id ? 'table-active' : ''}\n//                       style={{ cursor: 'pointer' }}\n//                     >\n//                       <td>{article.refAr}</td>\n//                       <td>{article.price}</td>\n//                       <td>{article.quantité}</td>\n//                       <td>{article.remise}</td>\n//                     </tr>\n//                   );\n//                 });\n//               })}\n//             </tbody>\n//           </table>\n//           <button onClick={handleCreateFactureClick}>Créer facture</button>\n//         </div>\n//       </Modal>\n//     </div>\n//   );\n// }\n\n// export default Fvbscf;","map":{"version":3,"names":[],"sources":["C:/Users/Dell/OneDrive/Bureau/quincaillerie/frontend/src/Fvbscf.js"],"sourcesContent":["// import React, { useState, useEffect } from 'react';\r\n// import axios from 'axios';\r\n// import { useNavigate } from 'react-router-dom';\r\n// import Modal from 'react-modal';\r\n// import Cfvbscf from './Cfvbscf';\r\n// import 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\n// Modal.setAppElement('#root');\r\n\r\n// function Fvbscf() {\r\n//   const [fVente, setFVente] = useState([]);\r\n//   const [ssortieVente, setSSortieVente] = useState([]);\r\n//   const [selectedFacture, setSelectedFacture] = useState(null);\r\n//   const [selectedRowId, setSelectedRowId] = useState(null);\r\n//   const [modalIsOpen, setModalIsOpen] = useState(false);\r\n\r\n//   const navigate = useNavigate();\r\n\r\n//   useEffect(() => {\r\n//     axios.get('http://localhost:7777/fvbscf/')\r\n//       .then((res) => {\r\n//         const formattedFVente = res.data.map((facture) => {\r\n//           const date = new Date(facture.date);\r\n//           const formattedDate = date.toISOString().split('T')[0];\r\n//           return {\r\n//             ...facture,\r\n//             date: formattedDate,\r\n//           };\r\n//         });\r\n//         setFVente(formattedFVente);\r\n//       })\r\n//       .catch((err) => console.log(err));\r\n\r\n//     axios.get('http://localhost:7777/ssortieventecf')\r\n//       .then((res) => {\r\n//         setSSortieVente(res.data);\r\n//       })\r\n//       .catch((err) => console.log('Error fetching ssortievente data:', err));\r\n//   }, []);\r\n\r\n//   const handleDelete = async () => {\r\n//     const id = selectedFacture?.id;\r\n//     if (!id) {\r\n//       console.log(\"No selected facture id\");\r\n//       return;\r\n//     }\r\n//     try {\r\n//       console.log(`Deleting facture with id: ${id}`);\r\n//       await axios.delete(`http://localhost:7777/factureVentecf/${id}`);\r\n//       setFVente(fVente.filter((facture) => facture.id !== id));\r\n//       setSelectedFacture(null);\r\n//       setSelectedRowId(null);\r\n//     } catch (err) {\r\n//       console.log(\"Error during delete request:\", err);\r\n//     }\r\n//   };\r\n\r\n//   const handleSubmit = (newFactureData) => {\r\n//     axios.post('http://localhost:7777/cfvbs/', newFactureData)\r\n//       .then(res => {\r\n//         setModalIsOpen(false);\r\n//         setFVente([...fVente, res.data]);\r\n//       })\r\n//       .catch(err => console.log('Error creating facture:', err));\r\n//   };\r\n\r\n//   const handleRowClick = (id, facture) => {\r\n//     setSelectedFacture(facture);\r\n//     setSelectedRowId(id);\r\n//   };\r\n\r\n//   const handleCreateFactureClick = () => {\r\n//     navigate('/cfvbscfa', { state: { selectedFacture } });\r\n//   };\r\n\r\n//   return (\r\n//     <div className=\"facture-vente-container\">\r\n//       <Cfvbscf onFactureSubmit={handleSubmit} selectedFacture={selectedFacture} />\r\n//       <button onClick={() => setModalIsOpen(true)}>Voir les produits</button>\r\n//       <Modal\r\n//         isOpen={modalIsOpen}\r\n//         onRequestClose={() => setModalIsOpen(false)}\r\n//         contentLabel=\"Voir les factures de vente\"\r\n//         style={{\r\n//           content: {\r\n//             top: '50%',\r\n//             left: '50%',\r\n//             right: 'auto',\r\n//             bottom: 'auto',\r\n//             marginRight: '-50%',\r\n//             transform: 'translate(-50%, -50%)',\r\n//             width: '80%',\r\n//             maxWidth: '800px',\r\n//             maxHeight: '80vh',\r\n//             overflowY: 'auto',\r\n//           },\r\n//         }}\r\n//       >\r\n//         <div className=\"d-flex justify-content-between align-items-center mb-3\">\r\n//           <h2 className=\"mb-4\">Factures de vente :</h2>\r\n//         </div>\r\n//         <button onClick={handleDelete}>Supprimer</button>\r\n//         <div className=\"table-responsive\">\r\n//           <table className=\"table table-striped\">\r\n//             <thead>\r\n//               <tr>\r\n//                 <th>Reference</th>\r\n//                 <th>Prix</th>\r\n//                 <th>Quantité</th>\r\n//                 <th>Remise</th>\r\n//               </tr>\r\n//             </thead>\r\n//             <tbody>\r\n//               {ssortieVente.map((entry, entryIndex) => {\r\n//                 const articles = JSON.parse(entry.articles);\r\n//                 return articles.map((article, articleIndex) => {\r\n//                   const id = `${entryIndex}-${articleIndex}`;\r\n//                   const facture = {\r\n//                     id: entry.id,\r\n//                     articles,\r\n//                     clName: entry.clName,\r\n//                     client_id: entry.client_id\r\n//                   };\r\n//                   return (\r\n//                     <tr\r\n//                       key={id}\r\n//                       onClick={() => handleRowClick(id, facture)}\r\n//                       className={selectedRowId === id ? 'table-active' : ''}\r\n//                       style={{ cursor: 'pointer' }}\r\n//                     >\r\n//                       <td>{article.refAr}</td>\r\n//                       <td>{article.price}</td>\r\n//                       <td>{article.quantité}</td>\r\n//                       <td>{article.remise}</td>\r\n//                     </tr>\r\n//                   );\r\n//                 });\r\n//               })}\r\n//             </tbody>\r\n//           </table>\r\n//           <button onClick={handleCreateFactureClick}>Créer facture</button>\r\n//         </div>\r\n//       </Modal>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// export default Fvbscf;"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}